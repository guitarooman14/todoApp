<nav id="menu">
  <ul>
    <li>
      <a href="#/all" (click)="resetFilter()">
        <mat-icon svgIcon="list"></mat-icon>
        {{'DisplayAllTasks' | translate}}</a>
    </li>
    <li>
      <a (click)="filterNotDoneYetTask()" href="#/tasks/toDo"><span><mat-icon svgIcon="removeAll"></mat-icon></span>{{'DisplayToDo' |
        translate}}</a>
    </li>
    <li>
      <a (click)="filterAlreadyDoneTask()" href="#/tasks/complete"><span><mat-icon svgIcon="success"></mat-icon></span>{{'DisplayComplete' |
        translate}}</a>
    </li>
  </ul>
</nav>
<div *ngIf="!isLoading && dataSource.data.length === 0">
  <h2 id="todo-app-no-todo">{{ 'NoTodo' | translate}}</h2>
</div>
<div [hidden]="isLoading || !isLoading && dataSource.data.length === 0">
  <!-- There is a bug if we try to use the ngif directive. The MatSort component is always undefined -->
  <table  mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8 todo-list-table"
          (matSortChange)="sortData($event)">

    <!-- Checkbox Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'TodoListTableFirstCol' | translate }}</th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox (click)="$event.stopPropagation()"
                      (change)="updateStatus(row.id)"
                      [checked]="row.status">
        </mat-checkbox>
      </td>
    </ng-container>

    <!-- Title Column -->
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'TodoListTableSecondCol' | translate }}</th>
      <td mat-cell *matCellDef="let element"> {{element.title}}</td>
    </ng-container>

    <!-- Criticity Column -->
    <ng-container matColumnDef="criticity">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'TodoListTableThirdCol' | translate }}</th>
      <td mat-cell *matCellDef="let element"> {{element.criticity | criticity}}</td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef> {{'TodoListTableFourthCol' | translate }}</th>
      <td mat-cell *matCellDef="let element">
        <span><button mat-icon-button (click)="deleteRowDataTable(element.id, paginator)"><mat-icon svgIcon="remove"></mat-icon></button></span>
        <span><button mat-icon-button><mat-icon svgIcon="more-details"></mat-icon></button></span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [style.text-decoration]="row.status ? 'line-through': 'blink'"
        (click)="selection.toggle(row)">
    </tr>

  </table>

  <mat-paginator #paginator
                 [length]="dataSource?.data.length"
                 [pageIndex]="0"
                 [pageSize]="5"
                 [pageSizeOptions]="[5, 10, 20, 50]"
                 itemsPerPageLabel="toto">
  </mat-paginator>
  <footer id="todo-app-task-counter">
    <h4 id="todo-app-task-counter-content" [translate]="'TaskCounterLabel'"
        [translateParams]="{count: dataSource?.data.length}"></h4>
  </footer>
</div>
